{% extends 'core/base.html' %}
{% load static %}

{% block title %}Painel do Superusuário{% endblock %}
{% block header_title %}Painel do Superusuário{% endblock %}

{% block user_info %}
  <span>Olá, <a href="{% url 'editar_perfil_super' %}" title="Editar Perfil">{{ request.user.get_full_name|default:request.user.username }}</a></span>
  <a href="{% url 'editar_perfil_super' %}" title="Editar Perfil"><i class="fas fa-user"></i></a>
  <a href="{% url 'painel_super' %}" title="Voltar ao Painel"><i class="fas fa-arrow-left"></i></a>
  <a href="{% url 'logout' %}" title="Sair"><i class="fas fa-power-off"></i></a>
{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'core/css/lista_discentes.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
{% endblock %}

{% block content %}
<div class="container">

  <!-- Topo com botão e busca -->
  <div class="top-controls">
    <a href="{% url 'cadastrar_turma' %}">
      <button class="cadastrar-btn">
        <i class="fas fa-book"></i>
        Cadastrar Turma
      </button>
    </a>

    <form class="buscar-form-container" method="get" action="{% url 'listar_turmas' %}">
      <input type="text" class="buscar-input" name="q" placeholder="Buscar turma..." value="{{ query|default:'' }}">
      <button type="submit" class="buscar-btn">
        <i class="fas fa-search"></i>
      </button>
    </form>
  </div>

  <!-- Conteúdo principal -->
  <div class="content-box">
    <h2 class="titulo">TURMAS CADASTRADAS</h2>

    <table class="tabela-discentes">
      <thead>
        <tr class="tabela-principal">
          <th class="tabela-cabecalho">NOME</th>
          <th class="tabela-cabecalho">AÇÕES</th>
        </tr>
      </thead>
      <tbody>
        {% for turma in turmas %}
          <tr class="linhas-tabela">
            <td class="tabela-info">{{ turma.nome }}</td>
            <td class="tabela-icones">

              <!-- EDITAR -->
              <a href="{% url 'editar_turma' turma.id %}" class="action-btn editar" title="Editar">
                <i class="fas fa-pen-to-square"></i>
              </a>

              <!-- EXCLUIR -->
              <a href="{% url 'excluir_turma' turma.id %}" class="action-btn deletar" title="Excluir" onclick="return confirm('Deseja excluir esta turma?')">
                <i class="fas fa-trash-can"></i>
              </a>

              <!-- ADICIONAR DISCIPLINA (NOVO) -->
              <a href="{% url 'listar_disciplinas_turma' turma.id %}"
                class="action-btn adicionar"
                title="Ver Disciplinas da Turma">
                  <i class="fas fa-book-medical"></i>
              </a>


            </td>
          </tr>
        {% empty %}
          <tr class="linhas-tabela">
            <td class="tabela-info" colspan="2">Nenhuma turma encontrada.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}
